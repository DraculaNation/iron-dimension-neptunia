#Reload Public Unrest
PLA_reload_public_unrest = {

	clamp_variable = {
		var = PLA_public_unrest_percent
		min = 0
		max = 100
	}
	clamp_variable = {
		var = PLA_radicalization_level
		min = 0
		max = 3
	}
	set_variable = {
		var = PLA_public_unrest_effect
		value = PLA_public_unrest_percent
	}
	multiply_variable = {
		var = PLA_public_unrest_effect
		value = -0.004
	}
	set_variable = {
		var = PLA_radicalization_effect
		value = PLA_radicalization_level
	}
	multiply_variable = {
		var = PLA_radicalization_effect
		value = -0.01
	}
}

###HOW FLEXIBLE OR RIGID SHOULD THIS BE?

PLA_increase_public_unrest_small = {
	if = {
		limit = { has_country_flag = PLA_public_unrest_dealt_with }
		add_political_power = -25
	}
	else = {
		custom_effect_tooltip = PLA_public_unrest_increase_small_tt
		add_to_variable = {
			var = PLA_public_unrest_percent
			value = 5
		}
		if = {
			limit = {
				has_country_flag = PLA_public_sensitive
			}
			add_to_variable = {
				var = PLA_public_unrest_percent
				value = 5
			}
		}
		PLA_reload_public_unrest = yes
	}
}

PLA_increase_public_unrest_medium = {
	if = {
		limit = { has_country_flag = PLA_public_unrest_dealt_with }
		add_political_power = -50
	}
	else = {
		custom_effect_tooltip = PLA_public_unrest_increase_medium_tt
		add_to_variable = {
			var = PLA_public_unrest_percent
			value = 10
		}
		if = {
			limit = {
				has_country_flag = PLA_public_sensitive
			}
			add_to_variable = {
				var = PLA_public_unrest_percent
				value = 5
			}
		}
		PLA_reload_public_unrest = yes
	}
}

PLA_increase_public_unrest_big = {
	if = {
		limit = { has_country_flag = PLA_public_unrest_dealt_with }
		add_political_power = -60
		add_war_support = -0.03
	}
	else = {
		custom_effect_tooltip = PLA_public_unrest_increase_big_tt
		custom_effect_tooltip = PLA_public_unrest_radicalization_tt
		add_to_variable = {
			var = PLA_public_unrest_percent
			value = 15
		}
		add_to_variable = {
			var = PLA_radicalization_level
			value = 1
		}
		if = {
			limit = {
				has_country_flag = PLA_public_sensitive
			}
			add_to_variable = {
				var = PLA_public_unrest_percent
				value = 5
			}
		}
		PLA_reload_public_unrest = yes
	}
}

PLA_decrease_public_unrest_small = {
	if = {
		limit = { has_country_flag = PLA_public_unrest_dealt_with }
		add_political_power = 20
	}
	else = {
		custom_effect_tooltip = PLA_public_unrest_decrease_small_tt
		if = {
			limit = { check_variable = { PLA_radicalization_level = 0 } }
			add_to_variable = {
				var = PLA_public_unrest_percent
				value = -5
			}
			else_if = {
				limit = { check_variable = { PLA_radicalization_level = 1 } }
				add_to_variable = {
					var = PLA_public_unrest_percent
					value = -4.5
				}
			}
			else_if = {
				limit = { check_variable = { PLA_radicalization_level = 2 } }
				add_to_variable = {
					var = PLA_public_unrest_percent
					value = -3
				}
			}
			else_if = {
				limit = { check_variable = { PLA_radicalization_level > 2 } }
				add_to_variable = {
					var = PLA_public_unrest_percent
					value = -2.5
				}
			}
		}
		PLA_reload_public_unrest = yes
	}
}

PLA_decrease_public_unrest_medium = {
	if = {
		limit = { has_country_flag = PLA_public_unrest_dealt_with }
		add_political_power = 40
	}
	else = {
		custom_effect_tooltip = PLA_public_unrest_decrease_medium_tt
		if = {
			limit = { check_variable = { PLA_radicalization_level = 0 } }
			add_to_variable = {
				var = PLA_public_unrest_percent
				value = -10
			}
			else_if = { 
				limit = { check_variable = { PLA_radicalization_level = 1 } }
				add_to_variable = {
					var = PLA_public_unrest_percent
					value = -9
				}
			}
			else_if = { 
				limit = { check_variable = { PLA_radicalization_level = 2 } }
				add_to_variable = {
					var = PLA_public_unrest_percent
					value = -7.5
				}
			}
			else_if = {
				limit = { check_variable = { PLA_radicalization_level > 2 } }
				add_to_variable = {
					var = PLA_public_unrest_percent
					value = -6
				}
			}
		}
		PLA_reload_public_unrest = yes
	}
}

PLA_decrease_public_unrest_big = {
	if = {
		limit = { has_country_flag = PLA_public_unrest_dealt_with }
		add_political_power = 50
		add_war_support = 0.02
	}
	else = {
		custom_effect_tooltip = PLA_public_unrest_decrease_big_tt
		if = {
			limit = { check_variable = { PLA_radicalization_level = 0 } }
			add_to_variable = {
				var = PLA_public_unrest_percent
				value = -15
			}
			else_if = {
				limit = { check_variable = { PLA_radicalization_level = 1 } }
				add_to_variable = {
					var = PLA_public_unrest_percent
					value = -13.5
				}
			}
			else_if = {
				limit = { check_variable = { PLA_radicalization_level = 2 } }
				add_to_variable = {
					var = PLA_public_unrest_percent
					value = -11
				}
			}
			else_if = {
				limit = { check_variable = { PLA_radicalization_level > 2 } }
				add_to_variable = {
					var = PLA_public_unrest_percent
					value = -8.5
				}
			}
		}
		PLA_reload_public_unrest = yes
	}
}

#Reload Histoire's Discontent - should always incur a penalty
PLA_reload_histoire_discontent = {

	clamp_variable = {
		var = PLA_histoire_discontent_percent
		min = 0
		max = 100
	}
	set_variable = {
		var = PLA_histoire_discontent_effect
		value = PLA_histoire_discontent_percent
	}
	multiply_variable = {
		var = PLA_histoire_discontent_effect
		value = -0.005
	}
	set_variable = {
		var = PLA_histoire_discontent_effect_pp
		value = PLA_histoire_discontent_percent
	}
	multiply_variable = {
		var = PLA_histoire_discontent_effect_pp
		value = -0.01
	}
	
}

###HOW FLEXIBLE OR RIGID SHOULD THIS BE?

PLA_increase_histoire_discontent_small = {
	if = {
		limit = { has_country_flag = PLA_histoire_discontent_dealt_with }
		add_political_power = -25
	}
	else = {
		custom_effect_tooltip = PLA_histoire_discontent_increase_small_tt
		add_to_variable = {
			var = PLA_histoire_discontent_percent
			value = 5
		}
		if = {
			limit = {
				has_country_flag = PLA_histoire_sensitive
			}
			add_to_variable = {
				var = PLA_histoire_discontent_percent
				value = 5
			}
		}
		PLA_reload_histoire_discontent = yes
	}
}

PLA_increase_histoire_discontent_medium = {
	if = {
		limit = { has_country_flag = PLA_histoire_discontent_dealt_with }
		add_political_power = -50
	}
	else = {
		custom_effect_tooltip = PLA_histoire_discontent_increase_medium_tt
		add_to_variable = {
			var = PLA_histoire_discontent_percent
			value = 10
		}
		if = {
			limit = {
				has_country_flag = PLA_histoire_sensitive
			}
			add_to_variable = {
				var = PLA_histoire_discontent_percent
				value = 5
			}
		}
		PLA_reload_histoire_discontent = yes
	}
}

PLA_increase_histoire_discontent_big = {
	if = {
		limit = { has_country_flag = PLA_histoire_discontent_dealt_with }
		add_political_power = -60
		add_stability = -0.03
	}
	else = {
		custom_effect_tooltip = PLA_histoire_discontent_increase_big_tt
		add_to_variable = {
			var = PLA_histoire_discontent_percent
			value = 15
		}
		if = {
			limit = {
				has_country_flag = PLA_histoire_sensitive
			}
			add_to_variable = {
				var = PLA_histoire_discontent_percent
				value = 5
			}
		}
		PLA_reload_histoire_discontent = yes
	}
}

PLA_decrease_histoire_discontent_small = {
	if = {
		limit = { has_country_flag = PLA_histoire_discontent_dealt_with }
		add_political_power = 20
	}
	else = {
		custom_effect_tooltip = PLA_histoire_discontent_decrease_small_tt
		add_to_variable = {
			var = PLA_histoire_discontent_percent
			value = -5
		}
		PLA_reload_histoire_discontent = yes
	}
}

PLA_decrease_histoire_discontent_medium = {
	if = {
		limit = { has_country_flag = PLA_histoire_discontent_dealt_with }
		add_political_power = 40
	}
	else = {
		custom_effect_tooltip = PLA_histoire_discontent_decrease_medium_tt
		add_to_variable = {
			var = PLA_histoire_discontent_percent
			value = -10
		}
		PLA_reload_histoire_discontent = yes
	}
}

PLA_decrease_histoire_discontent_big = {
	if = {
		limit = { has_country_flag = PLA_histoire_discontent_dealt_with }
		add_political_power = 50
		add_stability = 0.02
	}
	else = {
		custom_effect_tooltip = PLA_histoire_discontent_decrease_big_tt
		add_to_variable = {
			var = PLA_histoire_discontent_percent
			value = -15
		}
		PLA_reload_histoire_discontent = yes
	}
}

#Improving the Birthrates

PLA_improve_birthrates_conservative = {
	if = {
		limit = { has_idea = PLA_stagnant_birthrates_idea }
		swap_ideas = {
			remove_idea = PLA_stagnant_birthrates_idea
			add_idea = PLA_stagnant_birthrates_1_idea
		}
	}
	else_if = {
		limit = { has_idea = PLA_stagnant_birthrates_1_idea }
		swap_ideas = {
			remove_idea = PLA_stagnant_birthrates_1_idea
			add_idea = PLA_stagnant_birthrates_2_idea
		}
	}
	else_if = {
		limit = { has_idea = PLA_stagnant_birthrates_2_idea }
		swap_ideas = {
			remove_idea = PLA_stagnant_birthrates_2_idea
			add_idea = PLA_stagnant_birthrates_3_idea
		}
	}
	else_if = {
		limit = { has_idea = PLA_stagnant_birthrates_3_idea }
		swap_ideas = {
			remove_idea = PLA_stagnant_birthrates_3_idea
			add_idea = PLA_stagnant_birthrates_4_idea
		}
	}
	else_if = {
		limit = { has_idea = PLA_stagnant_birthrates_4_idea }
		swap_ideas = {
			remove_idea = PLA_stagnant_birthrates_4_idea
			add_idea = PLA_stagnant_birthrates_5_idea
		}
	}
	else_if = {
		limit = { has_idea = PLA_stagnant_birthrates_5_idea }
		swap_ideas = {
			remove_idea = PLA_stagnant_birthrates_5_idea
			add_idea = PLA_stagnant_birthrates_6_idea
		}
	}
	else_if = {
		limit = { has_idea = PLA_stagnant_birthrates_6_idea }
		swap_ideas = {
			remove_idea = PLA_stagnant_birthrates_6_idea
			add_idea = PLA_stagnant_birthrates_7_idea
		}
	}
	else_if = {
		limit = { has_idea = PLA_stagnant_birthrates_7_idea }
		swap_ideas = {
			remove_idea = PLA_stagnant_birthrates_7_idea
			add_idea = PLA_resurging_birthrates_idea
		}
	}
	else_if = {
		limit = { has_idea = PLA_resurging_birthrates_idea }
		swap_ideas = {
			remove_idea = PLA_resurging_birthrates_idea
			add_idea = PLA_resurging_birthrates_1_idea
		}
	}
	else_if = {
		limit = { has_idea = PLA_resurging_birthrates_1_idea }
		swap_ideas = {
			remove_idea = PLA_resurging_birthrates_1_idea
			add_idea = PLA_resurging_birthrates_2_idea
		}
	}
	else_if = {
		limit = { has_idea = PLA_resurging_birthrates_2_idea }
		swap_ideas = {
			remove_idea = PLA_resurging_birthrates_2_idea
			add_idea = PLA_resurging_birthrates_3_idea
		}
	}
	else_if = {
		limit = { has_idea = PLA_resurging_birthrates_3_idea }
		swap_ideas = {
			remove_idea = PLA_resurging_birthrates_3_idea
			add_idea = PLA_resurging_birthrates_4_idea
		}
	}
	else_if = {
		limit = { has_idea = PLA_resurging_birthrates_4_idea }
		swap_ideas = {
			remove_idea = PLA_resurging_birthrates_4_idea
			add_idea = PLA_resurging_birthrates_5_idea
		}
	}
	else_if = {
		limit = { has_idea = PLA_resurging_birthrates_5_idea }
		swap_ideas = {
			remove_idea = PLA_resurging_birthrates_5_idea
			add_idea = PLA_resurging_birthrates_6_idea
		}
	}
	else_if = {
		limit = { has_idea = PLA_resurging_birthrates_6_idea }
		swap_ideas = {
			remove_idea = PLA_resurging_birthrates_6_idea
			add_idea = PLA_resurging_birthrates_7_idea
		}
	}
}

PLA_improve_birthrates_radical = {
	if = {
		limit = { has_idea = PLA_stagnant_birthrates_idea }
		swap_ideas = {
			remove_idea = PLA_stagnant_birthrates_idea
			add_idea = PLA_stagnant_birthrates_2_idea
		}
	}
	else_if = {
		limit = { has_idea = PLA_stagnant_birthrates_1_idea }
		swap_ideas = {
			remove_idea = PLA_stagnant_birthrates_1_idea
			add_idea = PLA_stagnant_birthrates_3_idea
		}
	}
	else_if = {
		limit = { has_idea = PLA_stagnant_birthrates_2_idea }
		swap_ideas = {
			remove_idea = PLA_stagnant_birthrates_2_idea
			add_idea = PLA_stagnant_birthrates_4_idea
		}
	}
	else_if = {
		limit = { has_idea = PLA_stagnant_birthrates_3_idea }
		swap_ideas = {
			remove_idea = PLA_stagnant_birthrates_3_idea
			add_idea = PLA_stagnant_birthrates_5_idea
		}
	}
	else_if = {
		limit = { has_idea = PLA_stagnant_birthrates_4_idea }
		swap_ideas = {
			remove_idea = PLA_stagnant_birthrates_4_idea
			add_idea = PLA_stagnant_birthrates_6_idea
		}
	}
	else_if = {
		limit = { has_idea = PLA_stagnant_birthrates_5_idea }
		swap_ideas = {
			remove_idea = PLA_stagnant_birthrates_5_idea
			add_idea = PLA_stagnant_birthrates_7_idea
		}
	}
	else_if = {
		limit = { has_idea = PLA_stagnant_birthrates_6_idea }
		swap_ideas = {
			remove_idea = PLA_stagnant_birthrates_6_idea
			add_idea = PLA_resurging_birthrates_idea
		}
	}
	else_if = {
		limit = { has_idea = PLA_stagnant_birthrates_7_idea }
		swap_ideas = {
			remove_idea = PLA_stagnant_birthrates_7_idea
			add_idea = PLA_resurging_birthrates_1_idea
		}
	}
	else_if = {
		limit = { has_idea = PLA_resurging_birthrates_idea }
		swap_ideas = {
			remove_idea = PLA_resurging_birthrates_idea
			add_idea = PLA_resurging_birthrates_2_idea
		}
	}
	else_if = {
		limit = { has_idea = PLA_resurging_birthrates_1_idea }
		swap_ideas = {
			remove_idea = PLA_resurging_birthrates_1_idea
			add_idea = PLA_resurging_birthrates_3_idea
		}
	}
	else_if = {
		limit = { has_idea = PLA_resurging_birthrates_2_idea }
		swap_ideas = {
			remove_idea = PLA_resurging_birthrates_2_idea
			add_idea = PLA_resurging_birthrates_4_idea
		}
	}
	else_if = {
		limit = { has_idea = PLA_resurging_birthrates_3_idea }
		swap_ideas = {
			remove_idea = PLA_resurging_birthrates_3_idea
			add_idea = PLA_resurging_birthrates_5_idea
		}
	}
	else_if = {
		limit = { has_idea = PLA_resurging_birthrates_4_idea }
		swap_ideas = {
			remove_idea = PLA_resurging_birthrates_4_idea
			add_idea = PLA_resurging_birthrates_6_idea
		}
	}
	else_if = {
		limit = { has_idea = PLA_resurging_birthrates_5_idea }
		swap_ideas = {
			remove_idea = PLA_resurging_birthrates_5_idea
			add_idea = PLA_resurging_birthrates_7_idea
		}
	}
	else_if = {
		limit = { has_idea = PLA_resurging_birthrates_6_idea }
		swap_ideas = {
			remove_idea = PLA_resurging_birthrates_6_idea
			add_idea = PLA_resurging_birthrates_7_idea
		}
		add_political_power = 50
	}
}